{% extends 'base.html' %}
{% block title %}Settings{% endblock %}
{% block content %}

<!-- 1) Country management -->
<div class="card">
  <h3>Countries</h3>
  <form method="post" action="/settings/country/add" class="row">
    <div class="col"><input class="input" name="name" placeholder="Country name" required></div>
    <div class="col"><input class="input" name="code" placeholder="Code (2 letters)" required maxlength="2"></div>
    <div class="col" style="align-self:flex-end"><button class="btn small">Add</button></div>
  </form>
  <table style="margin-top:10px">
    <thead><tr><th>ID</th><th>Name</th><th>Code</th><th>Delete</th></tr></thead>
    <tbody>
      {% for c in countries %}
      <tr><td>{{ c.id }}</td><td>{{ c.name }}</td><td>{{ c.code }}</td>
        <td>
          <form method="post" action="/settings/country/delete"><input type="hidden" name="id" value="{{ c.id }}"><button class="btn small outline">Delete</button></form>
        </td>
      </tr>
      {% else %}<tr><td colspan="4" class="muted">No countries.</td></tr>{% endfor %}
    </tbody>
  </table>
</div>

<!-- 2) Edit product info -->
<div class="card">
  <h3>Edit Product Info</h3>
  <form method="post" action="/settings/product/edit">
    <div class="row">
      <div class="col">
        <label>Product</label>
        <select class="input" name="product_id" required>
          {% for p in products %}<option value="{{ p.id }}">{{ p.name }}</option>{% endfor %}
        </select>
      </div>
      <div class="col">
        <label>Field</label>
        <select class="input" name="field"><option value="cost_cn_usd">Cost CN</option><option value="ship_cn_ke_usd">Ship CNâ†’KE</option></select>
      </div>
      <div class="col">
        <label>New Value</label>
        <input class="input" type="number" step="0.01" name="value" required>
      </div>
      <div class="col" style="align-self:flex-end"><button class="btn small">Update</button></div>
    </div>
  </form>
</div>

<!-- 3) Restore system -->
<div class="card">
  <h3>Restore System State</h3>
  <form method="post" action="/settings/restore">
    <div class="row">
      <div class="col">
        <label>Restore point</label>
        <select class="input" name="restore_period">
          <option value="5m">5 minutes ago</option>
          <option value="30m">30 minutes ago</option>
          <option value="12h">12 hours ago</option>
          <option value="24h">24 hours ago</option>
          <option value="48h">48 hours ago</option>
        </select>
      </div>
      <div class="col" style="align-self:flex-end">
        <button class="btn small" onclick="return confirm('Restore the system to selected time?')">Restore</button>
      </div>
    </div>
  </form>
  <p class="muted" style="margin-top:10px">This will revert all data to the selected snapshot period.</p>
</div>

{% endblock %}
