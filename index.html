<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>EAS Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="/style.css" rel="stylesheet" />
</head>
<body>
<div id="app">

  <!-- Auth -->
  <section id="login" class="auth">
    <h1 class="brand">EAS Tracker</h1>
    <p>Enter your password to continue.</p>
    <form id="loginForm" class="row wrap" action="#">
      <input id="pw" class="input" type="password" placeholder="Password" autocomplete="current-password" />
      <button id="loginBtn" type="button" class="btn">Login</button>
    </form>
  </section>

  <!-- Main -->
  <section id="main" class="hide">
    <nav class="nav">
      <a href="#" data-view="home" class="active">Dashboard</a>
      <a href="#" data-view="products">Products</a>
      <a href="#" data-view="performance">Performance</a>
      <a href="#" data-view="finance">Finance</a>
      <a href="#" data-view="settings">Settings</a>
      <a id="logoutLink" href="#" class="nav-right btn outline">Logout</a>
    </nav>

    <div class="container">

      <!-- ===================== DASHBOARD ===================== -->
      <section id="home" class="section">
        <h2>Overview</h2>

        <div class="kpis">
          <div class="card kpi"><div class="h">Products</div><div id="kpiProducts">0</div></div>
          <div class="card kpi"><div class="h">Countries</div><div id="kpiCountries">0</div></div>
          <div class="card kpi"><div class="h">In Transit</div><div id="kpiTransit">0</div></div>
          <div class="card kpi"><div class="h">Ad Spend (All)</div><div id="kpiAdSpend">0 USD</div></div>
          <div class="card kpi"><div class="h">Delivered (This Week)</div><div id="kpiDelivered">0</div></div>
        </div>

        <div class="section">
          <div class="row wrap">
            <div class="card" style="flex:1; min-width:320px;">
              <div class="h">Stock & Ad Spend by Country</div>
              <div class="table-scroll">
                <table class="table compact">
                  <thead>
                  <tr><th>Country</th><th>Stock</th><th>Ad Spend</th></tr>
                  </thead>
                  <tbody id="stockByCountryBody"></tbody>
                  <tfoot>
                  <tr class="totals"><th>Total</th><th id="stockTotal">0</th><th id="adTotal">0 USD</th></tr>
                  </tfoot>
                </table>
              </div>
            </div>

            <div class="card" style="flex:1; min-width:320px;">
              <div class="h">Daily Ad Spend (Replace)</div>
              <div class="row wrap">
                <select id="adPlatform" class="input">
                  <option value="" disabled selected>Platform</option>
                  <option>Facebook</option>
                  <option>TikTok</option>
                  <option>Google</option>
                  <option>Snapchat</option>
                </select>
                <select id="adProduct" class="input"></select>
                <select id="adCountry" class="input"></select>
                <input id="adAmount" class="input" type="number" placeholder="Amount (USD)" />
                <button id="adSave" class="btn">Save / Replace</button>
              </div>

              <div class="h" style="margin-top:14px;">Create Shipment</div>
              <div class="row wrap">
                <select id="mvProduct" class="input"></select>
                <select id="mvFrom" class="input"></select>
                <select id="mvTo" class="input"></select>
                <input id="mvQty" class="input" type="number" placeholder="Qty" />
                <input id="mvShip" class="input" type="number" placeholder="Ship Cost" />
                <button id="mvAdd" class="btn">Add Shipment</button>
              </div>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="card">
            <div class="row wrap" style="justify-content:space-between;">
              <div class="h">Weekly Delivered by Country</div>
              <div class="row wrap">
                <button id="weeklyPrev" class="btn outline">◀</button>
                <span id="weeklyRange" class="badge">—</span>
                <button id="weeklyNext" class="btn outline">▶</button>
                <button id="weeklyReset" class="btn outline">Reset</button>
                <button id="weeklySave" class="btn">Save</button>
              </div>
            </div>
            <div class="table-scroll" style="margin-top:8px;">
              <table id="weeklyTable" class="table compact">
                <thead id="weeklyHead"></thead>
                <tbody id="weeklyBody"></tbody>
                <tfoot>
                <tr class="totals">
                  <th>Total</th>
                  <!-- 7 day totals + grand get filled dynamically -->
                  <th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                  <th id="wAllT"></th>
                </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="row wrap">
            <div class="card" style="flex:1; min-width:320px;">
              <div class="h">Transit: China → Kenya</div>
              <div class="table-scroll">
                <table class="table compact">
                  <thead><tr><th>ID</th><th>Product</th><th>Route</th><th>Qty</th><th>Ship Cost</th><th>Departed</th><th>Arrived</th><th>Days</th><th>Actions</th></tr></thead>
                  <tbody id="shipCKBody"></tbody>
                </table>
              </div>
            </div>
            <div class="card" style="flex:1; min-width:320px;">
              <div class="h">Transit: Other Routes</div>
              <div class="table-scroll">
                <table class="table compact">
                  <thead><tr><th>ID</th><th>Product</th><th>Route</th><th>Qty</th><th>Ship Cost</th><th>Departed</th><th>Arrived</th><th>Days</th><th>Actions</th></tr></thead>
                <tbody id="shipICBody"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="card">
            <div class="row wrap" style="justify-content:space-between;">
              <div class="h">Profit by Country</div>
              <div class="row wrap">
                <input id="pcStart" class="input" type="date" />
                <input id="pcEnd" class="input" type="date" />
                <select id="pcCountry" class="input"></select>
                <button id="pcRun" class="btn">Run</button>
              </div>
            </div>
            <div class="table-scroll" style="margin-top:8px;">
              <table class="table compact">
                <thead><tr><th>Country</th><th>Revenue</th><th>Ad Spend</th><th>Delivery/Extra</th><th>Pieces</th><th>Profit</th></tr></thead>
                <tbody id="profitCountryBody"></tbody>
                <tfoot>
                <tr class="totals">
                  <th>Totals</th>
                  <th id="pcRevT">0</th>
                  <th id="pcAdT">0</th>
                  <th id="pcDelT">0</th>
                  <th id="pcPiecesT">0</th>
                  <th id="pcProfitT">0</th>
                </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="row wrap">
            <div class="card" style="flex:1; min-width:320px;">
              <div class="h">Quick To-Dos</div>
              <div class="row wrap">
                <input id="todoText" class="input" placeholder="Task…" />
                <button id="todoAdd" class="btn">Add</button>
              </div>
              <div id="todoList" style="margin-top:10px;"></div>
            </div>
            <div class="card" style="flex:1; min-width:320px;">
              <div class="h">Weekly Planner</div>
              <div id="weeklyWrap" class="weeks" style="margin-top:8px;"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===================== PRODUCTS ===================== -->
      <section id="products" class="section" style="display:none;">
        <h2>Products</h2>
        <div class="card">
          <div class="row wrap">
            <input id="pName" class="input" placeholder="Name" />
            <input id="pSku" class="input" placeholder="SKU (optional)" />
            <input id="pCost" class="input" type="number" placeholder="Cost in China" />
            <input id="pShip" class="input" type="number" placeholder="Ship China→Kenya" />
            <input id="pMB" class="input" type="number" placeholder="Margin Budget" />
            <button id="pAdd" class="btn">Add Product</button>
          </div>
        </div>

        <div class="section card">
          <div class="table-scroll">
            <table id="productsTable" class="table compact">
              <thead>
              <tr><th>Name</th><th>SKU</th><th>Status</th><th>Actions</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ===================== PERFORMANCE ===================== -->
      <section id="performance" class="section" style="display:none;">
        <h2>Top Delivered (by Product & Country)</h2>
        <div class="card">
          <div class="row wrap">
            <select id="pfQuick" class="input">
              <option value="custom">Custom range…</option>
              <option value="7">Last 7 days</option>
              <option value="14">Last 14 days</option>
              <option value="30">Last 30 days</option>
              <option value="90">Last 90 days</option>
            </select>
            <input id="pfStart" type="date" class="input" />
            <input id="pfEnd" type="date" class="input" />
            <select id="pfCountry" class="input">
              <!-- app.js injects: <option value="">All countries</option> + actual countries -->
            </select>
            <button id="pfRun" class="btn">Run</button>
          </div>
        </div>

        <div class="section card">
          <div class="table-scroll">
            <table class="table compact">
              <thead>
              <tr>
                <th>Product</th><th>Country</th><th>Pieces</th><th>Ad Spend</th><th>Production Cost</th><th>Profit</th><th>Profit / Piece</th>
              </tr>
              </thead>
              <tbody id="pfTable"></tbody>
            </table>
          </div>
        </div>

        <div class="section card">
          <div class="h">Create Remittance</div>
          <div class="row wrap">
            <input id="rStart" class="input" type="date" />
            <input id="rEnd" class="input" type="date" />
            <select id="rCountry" class="input"></select>
            <select id="rProduct" class="input"></select>
            <input id="rOrders" class="input" type="number" placeholder="Orders" />
            <input id="rPieces" class="input" type="number" placeholder="Pieces" />
            <input id="rRev" class="input" type="number" placeholder="Revenue (USD)" />
            <input id="rAds" class="input" type="number" placeholder="Ad Spend (USD)" />
            <input id="rExtra" class="input" type="number" placeholder="Extra / Piece (delivery etc.)" />
            <button id="rAdd" class="btn">Save Remittance</button>
          </div>
          <p class="muted" style="margin-top:8px;">Note: China is excluded here (only used as origin for shipments).</p>
        </div>
      </section>

      <!-- ===================== FINANCE ===================== -->
      <section id="finance" class="section" style="display:none;">
        <h2>Finance</h2>

        <div class="row wrap">
          <div class="card" style="flex:1; min-width:320px;">
            <div class="h">Categories</div>
            <div class="row wrap">
              <select id="fcType" class="input">
                <option value="debit">Debit</option>
                <option value="credit">Credit</option>
              </select>
              <input id="fcName" class="input" placeholder="New category" />
              <button id="fcAdd" class="btn">Add</button>
            </div>
            <div style="margin-top:10px;">
              <div class="h">Debits</div>
              <div id="fcDebits" class="deletable"></div>
              <div class="h" style="margin-top:10px;">Credits</div>
              <div id="fcCredits" class="deletable"></div>
            </div>
          </div>

          <div class="card" style="flex:1; min-width:320px;">
            <div class="h">New Entry</div>
            <div class="row wrap">
              <input id="feDate" class="input" type="date" />
              <select id="feType" class="input">
                <option value="" disabled selected>Type</option>
                <option value="debit">Debit</option>
                <option value="credit">Credit</option>
              </select>
              <select id="feCat" class="input"></select>
              <input id="feAmt" class="input" type="number" placeholder="Amount" />
              <input id="feNote" class="input" placeholder="Note (optional)" />
              <button id="feAdd" class="btn">Add</button>
            </div>

            <div style="margin-top:12px;">
              <div class="big-balance">
                <div class="h">Running Balance</div>
                <div id="runBalance" class="balance">0 USD</div>
              </div>
            </div>
          </div>
        </div>

        <div class="section card">
          <div class="row wrap" style="justify-content:space-between;">
            <div class="h">Entries (Filter)</div>
            <div class="row wrap">
              <input id="fes" class="input" type="date" />
              <input id="fee" class="input" type="date" />
              <button id="feRun" class="btn">Run</button>
            </div>
          </div>

          <div class="h" id="feBalance" style="margin-top:8px;">Period Balance: 0 USD</div>
          <div class="table-scroll" style="margin-top:8px;">
            <table class="table compact">
              <thead><tr><th>Date</th><th>Type</th><th>Category</th><th>Amount</th><th>Note</th><th>Actions</th></tr></thead>
              <tbody id="feTable"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ===================== SETTINGS ===================== -->
      <section id="settings" class="section" style="display:none;">
        <h2>Settings</h2>

        <div class="row wrap">
          <div class="card" style="flex:1; min-width:320px;">
            <div class="h">Countries</div>
            <div class="row wrap">
              <input id="cty" class="input" placeholder="Add country" />
              <button id="ctyAdd" class="btn">Add</button>
            </div>
            <p class="muted" style="margin-top:6px;">China cannot be deleted and is only used as a shipment origin.</p>
            <div id="ctyList" class="chips" style="margin-top:10px;"></div>
          </div>

          <div class="card" style="flex:1; min-width:320px;">
            <div class="h">Edit Product</div>
            <div class="row wrap">
              <select id="epSelect" class="input"></select>
              <input id="epName" class="input" placeholder="Name" />
              <input id="epSku" class="input" placeholder="SKU" />
              <input id="epCost" class="input" type="number" placeholder="Cost in China" />
              <input id="epShip" class="input" type="number" placeholder="Ship China→Kenya" />
              <input id="epMB" class="input" type="number" placeholder="Margin Budget" />
              <button id="epSave" class="btn">Save</button>
            </div>
          </div>
        </div>

        <div class="section card">
          <div class="h">Manual Save & Restore</div>
          <div class="row wrap">
            <input id="snapName" class="input" placeholder="Snapshot name (optional)" />
            <button id="snapSave" class="btn">Save Snapshot</button>
          </div>
          <div class="table-scroll" style="margin-top:10px;">
            <table class="table compact">
              <thead><tr><th>Name</th><th>File</th><th>Actions</th></tr></thead>
              <tbody id="snapList"></tbody>
            </table>
          </div>
          <p class="muted" style="margin-top:6px;">Pushing a snapshot restores data but the snapshot itself remains until you delete it.</p>
        </div>
      </section>

    </div>
  </section>
</div>

<script src="/app.js" defer></script>
</body>
</html>
