<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EAS Tracker — Product</title>
  <link rel="stylesheet" href="/public/styles.css"/>
</head>
<body>
  <div class="container">

    <div class="row wrap" style="margin:10px 0">
      <a href="/" class="btn outline">← Back to Dashboard</a>
      <div class="badge" id="pBreadcrumb">Product</div>
    </div>

    <!-- HEADER -->
    <section class="section">
      <h2 id="pTitle">Product</h2>
      <div class="card">
        <div class="row wrap">
          <div><b>Name:</b> <span id="pName">—</span></div>
          <div><b>SKU:</b> <span id="pSku">—</span></div>
          <div><b>Status:</b> <span id="pStatus">—</span></div>
          <div><b>Cost (China):</b> $<span id="pCost">0</span></div>
          <div><b>Ship China→Kenya:</b> $<span id="pShip">0</span></div>
          <div><b>Profit + Ads Budget:</b> $<span id="pMB">0</span></div>
        </div>
        <div class="row wrap">
          <button id="pActivate" class="btn outline">Set Active</button>
          <button id="pArchive" class="btn danger outline">Archive</button>
          <button id="pDelete" class="btn danger">Delete Product</button>
        </div>
      </div>
    </section>

    <!-- STOCK & AD SPEND BY COUNTRY (this product only; China excluded) -->
    <section class="section">
      <h2>Stock &amp; Ad Spend by Country</h2>
      <div class="card">
        <div class="row wrap">
          <select id="pAdCountry" class="input"></select>
          <select id="pAdPlatform" class="input">
            <option value="facebook">Facebook</option>
            <option value="tiktok">TikTok</option>
            <option value="google">Google</option>
          </select>
          <input id="pAdAmount" type="number" class="input" placeholder="Amount (USD)" min="0" step="0.01"/>
          <button id="pAdSave" class="btn">Save/Replace</button>
        </div>
        <small>Ad spend here only affects this product. Saving again for the same platform &amp; country replaces today’s value.</small>
      </div>

      <table class="table" id="pStockTable">
        <thead>
          <tr>
            <th>Country</th>
            <th>Approx. Stock</th>
            <th>Total Ad Spend (USD)</th>
          </tr>
        </thead>
        <tbody id="pStockBody"><!-- rows injected --></tbody>
        <tfoot>
          <tr class="totals">
            <th>Totals</th>
            <th id="pStockTotal">0</th>
            <th id="pAdTotal">0.00</th>
          </tr>
        </tfoot>
      </table>
    </section>

    <!-- STOCK MOVEMENT (create shipment for this product; China allowed here) -->
    <section class="section">
      <h2>Create Shipment (This Product)</h2>
      <div class="card">
        <div class="row wrap">
          <select id="ppFrom" class="input"></select>
          <span>→</span>
          <select id="ppTo" class="input"></select>
          <input id="ppQty" type="number" class="input" placeholder="Qty" min="0"/>
          <input id="ppShipCost" type="number" class="input" placeholder="Ship Cost (USD)" min="0" step="0.01"/>
          <input id="ppDepart" type="date" class="input"/>
          <button id="ppAdd" class="btn">Add Shipment</button>
        </div>
        <small>When marked as arrived, stock is deducted from origin and added to destination.</small>
      </div>
    </section>

    <!-- TRANSIT (FILTERED TO THIS PRODUCT). On arrive, stays on this page. -->
    <section class="section">
      <h2>Transit — China → Kenya (This Product)</h2>
      <table class="table">
        <thead><tr>
          <th>ID</th><th>Route</th><th>Qty</th><th>Ship Cost</th><th>Departed</th><th>Arrived</th><th>Days</th><th>Actions</th>
        </tr></thead>
        <tbody id="pShipCKBody"><!-- rows injected --></tbody>
      </table>
    </section>

    <section class="section">
      <h2>Transit — Inter-country (This Product)</h2>
      <table class="table">
        <thead><tr>
          <th>ID</th><th>Route</th><th>Qty</th><th>Ship Cost</th><th>Departed</th><th>Arrived</th><th>Days</th><th>Actions</th>
        </tr></thead>
        <tbody id="pShipICBody"><!-- rows injected --></tbody>
      </table>
    </section>

    <!-- LIFETIME (THIS PRODUCT) -->
    <section class="section">
      <h2>Lifetime — This Product</h2>
      <div class="row wrap">
        <input id="plStart" type="date" class="input"/>
        <input id="plEnd" type="date" class="input"/>
        <button id="plRun" class="btn">Run</button>
      </div>
      <table class="table" id="pLifeTable">
        <thead><tr>
          <th>Country</th><th>Revenue</th><th>Ad Spend</th><th>Shipping</th><th>Base Cost</th><th>Pieces</th><th>Profit</th>
        </tr></thead>
        <tbody id="pLifeBody"><!-- rows injected --></tbody>
        <tfoot>
          <tr class="totals">
            <th>Totals</th>
            <th id="plRevT">0</th><th id="plAdT">0</th><th id="plShipT">0</th><th id="plBaseT">0</th><th id="plPiecesT">0</th><th id="plProfitT">0</th>
          </tr>
        </tfoot>
      </table>
    </section>

    <!-- INFLUENCERS (ADD / DELETE + SPEND) -->
    <section class="section">
      <h2>Influencers</h2>

      <div class="card">
        <div class="h">Add Influencer</div>
        <div class="row wrap">
          <input id="pInfName" class="input" placeholder="Name"/>
          <input id="pInfSocial" class="input" placeholder="Social handle"/>
          <select id="pInfCountry" class="input"><!-- countries (no China) --></select>
          <button id="pInfAdd" class="btn">Add</button>
        </div>
      </div>

      <table class="table" id="pInfTable">
        <thead><tr><th>Name</th><th>Social</th><th>Country</th><th>Actions</th></tr></thead>
        <tbody><!-- rows injected, include delete buttons --></tbody>
      </table>

      <div class="card">
        <div class="h">Add Influencer Spend (This Product)</div>
        <div class="row wrap">
          <input id="pInfDate" type="date" class="input"/>
          <select id="pInfPick" class="input"><!-- influencers list --></select>
          <select id="pInfSpendCountry" class="input"><!-- countries (no China) --></select>
          <input id="pInfAmount" type="number" class="input" placeholder="Amount (USD)" min="0" step="0.01"/>
          <button id="pInfSpendAdd" class="btn">Add Spend</button>
        </div>
      </div>

      <table class="table" id="pInfSpendTable">
        <thead><tr>
          <th>Date</th><th>Influencer</th><th>Country</th><th>Amount</th><th></th>
        </tr></thead>
        <tbody><!-- rows injected; include delete spend buttons --></tbody>
      </table>
    </section>

  </div>

  <script src="/public/app.js"></script>
  <script src="/public/snapshot.js"></script>
</body>
</html>
