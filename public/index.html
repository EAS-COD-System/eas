<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EAS Tracker - Business Intelligence</title>
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
  <div id="app">
    <!-- LOGIN SCREEN -->
    <div id="login" class="auth">
      <h1 class="brand">EAS Tracker</h1>
      <p>Enter password to access business intelligence dashboard</p>
      <div class="row">
        <input id="pw" type="password" class="input" placeholder="Password"/>
        <button id="loginBtn" class="btn">Login</button>
      </div>
    </div>

    <!-- MAIN APPLICATION -->
    <div id="main" class="hide">
      <!-- FIXED HEADER NAVIGATION -->
      <header class="app-header">
        <nav class="main-nav">
          <div class="nav-brand">EAS Tracker</div>
          <div class="nav-links">
            <a data-view="home" class="nav-link active">Dashboard</a>
            <a data-view="products" class="nav-link">Products</a>
            <a data-view="performance" class="nav-link">Performance</a>
            <a data-view="finance" class="nav-link">Finance</a>
            <a data-view="settings" class="nav-link">Settings</a>
            <a id="logoutLink" class="nav-link logout">Logout</a>
          </div>
        </nav>
      </header>

      <div class="app-container">
        <!-- DASHBOARD -->
        <section id="home" class="page-section">
          <!-- BUSINESS OVERVIEW - COMPACT STYLE -->
          <div class="section">
            <div class="section-header">
              <h2>Business Overview</h2>
              <div class="last-update">Live Data</div>
            </div>
            <div class="metrics-grid">
              <div class="metric-card compact">
                <div class="metric-icon">üì¶</div>
                <div class="metric-content">
                  <div class="metric-value" id="kpiProducts">0</div>
                  <div class="metric-label">Active Products</div>
                </div>
              </div>
              <div class="metric-card compact">
                <div class="metric-icon">üåç</div>
                <div class="metric-content">
                  <div class="metric-value" id="kpiCountries">0</div>
                  <div class="metric-label">Sales Countries</div>
                </div>
              </div>
              <div class="metric-card compact">
                <div class="metric-icon">üöö</div>
                <div class="metric-content">
                  <div class="metric-value" id="kpiTransit">0</div>
                  <div class="metric-label">Transit Shipments</div>
                </div>
              </div>
              <div class="metric-card compact">
                <div class="metric-icon">üìä</div>
                <div class="metric-content">
                  <div class="metric-value" id="kpiAdSpend">0 USD</div>
                  <div class="metric-label">Total Ad Spend</div>
                </div>
              </div>
              <div class="metric-card compact">
                <div class="metric-icon">üì¶</div>
                <div class="metric-content">
                  <div class="metric-value" id="kpiDelivered">0</div>
                  <div class="metric-label">Weekly Delivered</div>
                </div>
              </div>
            </div>
          </div>

          <!-- STOCK & AD SPEND BY COUNTRY - COMPACT -->
          <div class="section">
            <div class="section-header">
              <h2>Stock & Ad Spend by Country</h2>
            </div>
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Country</th>
                    <th>Stock</th>
                    <th>Ad Spend</th>
                  </tr>
                </thead>
                <tbody id="stockByCountryBody"></tbody>
                <tfoot>
                  <tr class="table-totals">
                    <th>Totals</th>
                    <th id="stockTotal">0</th>
                    <th id="adTotal">0</th>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>

          <!-- QUICK ACTIONS ROW -->
          <div class="section">
            <div class="section-header">
              <h2>Quick Actions</h2>
            </div>
            <div class="actions-grid">
              <div class="action-card">
                <h3>Add Product</h3>
                <p>Create new product entry</p>
                <button class="btn action-btn" onclick="switchToSection('products')">Add Product</button>
              </div>
              <div class="action-card">
                <h3>Record Ad Spend</h3>
                <p>Add advertising expenditure</p>
                <button class="btn action-btn" onclick="showAdSpendForm()">Add Spend</button>
              </div>
              <div class="action-card">
                <h3>Stock Movement</h3>
                <p>Record inventory transfer</p>
                <button class="btn action-btn" onclick="showMovementForm()">Add Movement</button>
              </div>
              <div class="action-card">
                <h3>Finance Entry</h3>
                <p>Record financial transaction</p>
                <button class="btn action-btn" onclick="switchToSection('finance')">Add Entry</button>
              </div>
            </div>
          </div>

          <!-- AD SPEND FORM (Hidden by default) -->
          <div id="adSpendForm" class="section hide">
            <div class="section-header">
              <h3>Daily Advertising Spend</h3>
              <button class="btn outline" onclick="hideAdSpendForm()">Close</button>
            </div>
            <div class="form-grid">
              <select id="adPlatform" class="input">
                <option value="facebook">Facebook</option>
                <option value="tiktok">TikTok</option>
                <option value="google">Google</option>
              </select>
              <select id="adProduct" class="input"></select>
              <select id="adCountry" class="input"></select>
              <input id="adAmount" type="number" class="input" placeholder="Amount (USD)" min="0" step="0.01"/>
              <button id="adSave" class="btn">Save/Replace</button>
            </div>
          </div>

          <!-- MOVEMENT FORM (Hidden by default) -->
          <div id="movementForm" class="section hide">
            <div class="section-header">
              <h3>Stock Movement</h3>
              <button class="btn outline" onclick="hideMovementForm()">Close</button>
            </div>
            <div class="form-grid">
              <select id="mvFrom" class="input"></select>
              <span class="form-arrow">‚Üí</span>
              <select id="mvTo" class="input"></select>
              <select id="mvProduct" class="input"></select>
              <input id="mvQty" type="number" class="input" placeholder="Quantity" min="0"/>
              <input id="mvShip" type="number" class="input" placeholder="Shipping Cost (USD)" min="0" step="0.01"/>
              <button id="mvAdd" class="btn">Add Movement</button>
            </div>
          </div>

          <!-- TRANSIT TABLES -->
          <div class="two-column-grid">
            <div class="section">
              <div class="section-header">
                <h3>Transit (China ‚Üí Kenya)</h3>
              </div>
              <div class="table-container">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Qty</th>
                      <th>Ship Cost</th>
                      <th>Departed</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="shipCKBody"></tbody>
                </table>
              </div>
            </div>

            <div class="section">
              <div class="section-header">
                <h3>Transit (Inter-country)</h3>
              </div>
              <div class="table-container">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Route</th>
                      <th>Qty</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="shipICBody"></tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- LIFETIME PERFORMANCE -->
          <div class="section">
            <div class="section-header">
              <h2>Lifetime Product Performance</h2>
            </div>
            <div class="filter-bar">
              <select id="lpProduct" class="input compact">
                <option value="">All Products</option>
              </select>
              <input id="lpStart" type="date" class="input compact"/>
              <input id="lpEnd" type="date" class="input compact"/>
              <button id="lpRun" class="btn compact">Analyze</button>
            </div>
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>Country</th>
                    <th>Revenue</th>
                    <th>Ad Spend</th>
                    <th>Shipping</th>
                    <th>Base Cost</th>
                    <th>Pieces</th>
                    <th>Profit</th>
                  </tr>
                </thead>
                <tbody id="lifetimeBody"></tbody>
                <tfoot>
                  <tr class="table-totals">
                    <th colspan="2">Totals</th>
                    <th id="ltRevT">0</th>
                    <th id="ltAdT">0</th>
                    <th id="ltShipT">0</th>
                    <th id="ltBaseT">0</th>
                    <th id="ltPiecesT">0</th>
                    <th id="ltProfitT">0</th>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </section>

        <!-- PRODUCTS MANAGEMENT -->
        <section id="products" class="page-section hide">
          <div class="section">
            <div class="section-header">
              <h2>Product Management</h2>
            </div>
            
            <!-- Add Product Form -->
            <div class="card">
              <h3>Add New Product</h3>
              <div class="form-grid">
                <input id="pName" class="input" placeholder="Product Name"/>
                <input id="pSku" class="input" placeholder="SKU"/>
                <input id="pCost" type="number" class="input" placeholder="Cost from China (USD)" step="0.01"/>
                <input id="pShip" type="number" class="input" placeholder="Ship China‚ÜíKenya (USD)" step="0.01"/>
                <input id="pMB" type="number" class="input" placeholder="Profit + Ads Budget (USD)" step="0.01"/>
                <button id="pAdd" class="btn">Add Product</button>
              </div>
            </div>

            <!-- Products Table -->
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>SKU</th>
                    <th>Status</th>
                    <th>Cost</th>
                    <th>Shipping</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="productsTable"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- PERFORMANCE -->
        <section id="performance" class="page-section hide">
          <div class="section">
            <div class="section-header">
              <h2>Performance Analytics</h2>
            </div>

            <!-- Top Products -->
            <div class="card">
              <h3>Top Performing Products</h3>
              <div class="filter-bar">
                <select id="pfQuick" class="input compact">
                  <option value="8">Last 8 Days</option>
                  <option value="28">Last 28 Days</option>
                  <option value="custom">Custom Range</option>
                </select>
                <input id="pfStart" type="date" class="input compact"/>
                <input id="pfEnd" type="date" class="input compact"/>
                <select id="pfCountry" class="input compact">
                  <option value="">All Countries</option>
                </select>
                <button id="pfRun" class="btn compact">Analyze</button>
              </div>
              <div class="table-container">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Country</th>
                      <th>Pieces</th>
                      <th>Ad Spend</th>
                      <th>Product Cost</th>
                      <th>Total Profit</th>
                      <th>Profit / pc</th>
                    </tr>
                  </thead>
                  <tbody id="pfTable"></tbody>
                </table>
              </div>
            </div>

            <!-- Remittance Report -->
            <div class="card">
              <h3>Remittance Report</h3>
              <div class="form-grid">
                <input id="rStart" type="date" class="input" placeholder="Start Date"/>
                <input id="rEnd" type="date" class="input" placeholder="End Date"/>
                <select id="rCountry" class="input"></select>
                <select id="rProduct" class="input"></select>
                <input id="rOrders" type="number" class="input" placeholder="Orders" min="0"/>
                <input id="rPieces" type="number" class="input" placeholder="Pieces" min="0"/>
                <input id="rRev" type="number" class="input" placeholder="Revenue (USD)" min="0" step="0.01"/>
                <input id="rAds" type="number" class="input" placeholder="Ad Spend (USD)" min="0" step="0.01"/>
                <input id="rExtra" type="number" class="input" placeholder="Extra cost / piece (USD)" min="0" step="0.01"/>
                <button id="rAdd" class="btn">Add Remittance</button>
              </div>
            </div>
          </div>
        </section>

        <!-- FINANCE -->
        <section id="finance" class="page-section hide">
          <div class="section">
            <div class="section-header">
              <h2>Financial Management</h2>
            </div>

            <!-- Running Balance - BIG AND BOLD -->
            <div class="finance-balance-card">
              <div class="balance-label">Running Balance (All-time)</div>
              <div id="feRunning" class="balance-amount">0.00 USD</div>
            </div>

            <!-- Categories -->
            <div class="card">
              <h3>Finance Categories</h3>
              <div class="form-row">
                <select id="fcType" class="input">
                  <option value="debit">Debit</option>
                  <option value="credit">Credit</option>
                </select>
                <input id="fcName" class="input" placeholder="Category Name"/>
                <button id="fcAdd" class="btn">Add Category</button>
              </div>
              <div class="categories-grid">
                <div class="category-section">
                  <h4>Debit Categories</h4>
                  <div id="fcDebits" class="category-chips"></div>
                </div>
                <div class="category-section">
                  <h4>Credit Categories</h4>
                  <div id="fcCredits" class="category-chips"></div>
                </div>
              </div>
            </div>

            <!-- Entries -->
            <div class="card">
              <h3>Financial Entries</h3>
              <div class="form-grid">
                <input id="feDate" type="date" class="input"/>
                <select id="feCat" class="input"></select>
                <input id="feAmt" type="number" class="input" placeholder="Amount (USD)" step="0.01"/>
                <input id="feNote" class="input" placeholder="Note"/>
                <button id="feAdd" class="btn">Add Entry</button>
              </div>

              <div class="filter-bar">
                <input id="fes" type="date" class="input compact" placeholder="From Date"/>
                <input id="fee" type="date" class="input compact" placeholder="To Date"/>
                <button id="feRun" class="btn outline compact">Filter</button>
                <div id="feBalance" class="period-balance">Period Balance: ‚Äî</div>
              </div>

              <div class="table-container">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Type</th>
                      <th>Category</th>
                      <th>Amount</th>
                      <th>Note</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="feTable"></tbody>
                </table>
              </div>
            </div>
          </div>
        </section>

        <!-- SETTINGS -->
        <section id="settings" class="page-section hide">
          <div class="section">
            <div class="section-header">
              <h2>System Settings</h2>
            </div>

            <!-- Countries Management -->
            <div class="card">
              <h3>Countries Management</h3>
              <div class="form-row">
                <input id="cty" class="input" placeholder="Country Name"/>
                <button id="ctyAdd" class="btn">Add Country</button>
              </div>
              <div id="ctyList" class="settings-chips"></div>
            </div>

            <!-- Edit Product -->
            <div class="card">
              <h3>Edit Product Information</h3>
              <div class="form-grid">
                <select id="epSelect" class="input">
                  <option value="">Select Product</option>
                </select>
                <input id="epName" class="input" placeholder="Product Name"/>
                <input id="epSku" class="input" placeholder="SKU"/>
                <input id="epCost" type="number" class="input" placeholder="Cost from China (USD)" step="0.01"/>
                <input id="epShip" type="number" class="input" placeholder="Ship China‚ÜíKenya (USD)" step="0.01"/>
                <input id="epMB" type="number" class="input" placeholder="Profit + Ads Budget (USD)" step="0.01"/>
                <button id="epSave" class="btn">Save Changes</button>
              </div>
            </div>

            <!-- Snapshots -->
            <div class="card">
              <h3>Data Backup & Restore</h3>
              <div class="form-row">
                <input id="snapName" class="input" placeholder="Snapshot Name"/>
                <button id="snapSave" class="btn">Create Snapshot</button>
              </div>
              <div class="table-container">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Date</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="snapList"></tbody>
                </table>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script src="/app.js" defer></script>
</body>
</html>
